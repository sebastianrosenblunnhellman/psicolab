# Decap CMS Configuration for PsiColab

# BACKEND: Netlify Git Gateway
backend:
  name: git-gateway
  branch: master # Rama master confirmada

# LOCAL BACKEND
local_backend: true 

# CARPETA DE IMÁGENES
# Las imágenes subidas irán a esta carpeta para no ensuciar la raíz de images
media_folder: "public/images/cms"
public_folder: "/images/cms"

collections:
  # COLECCIÓN DE ARTÍCULOS
  - name: "articles"
    label: "Artículos"
    folder: "content/articles"
    create: true
    slug: "{{slug}}"
    sortable_fields: ['title', 'date']
    fields:
      - {label: "Título", name: "title", widget: "string"}
      - {label: "Fecha", name: "date", widget: "datetime"}
      - {label: "Autor", name: "author", widget: "string", default: "Psi Colab"}
      - {label: "Etiquetas", name: "tags", widget: "list", default: ["Psicología"]}
      - {label: "Extracto", name: "excerpt", widget: "text"}
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Publicado", name: "published", widget: "boolean", default: true}
      - {label: "Cuerpo", name: "body", widget: "markdown"}

  # COLECCIÓN DE RECURSOS
  - name: "resources"
    label: "Recursos"
    folder: "content/resources"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Título", name: "title", widget: "string"}
      - {label: "Tipo", name: "type", widget: "string", default: "biblioteca"}
      - {label: "Autor", name: "author", widget: "string"}
      - {label: "Extracto", name: "excerpt", widget: "text"}
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Link Externo", name: "link", widget: "string", required: false}
      - {label: "Cuerpo", name: "body", widget: "markdown", required: false}

  # COLECCIÓN DE CURSOS (JERÁRQUICA)
  - name: "courses"
    label: "Cursos y Contenido"
    label_singular: "Elemento de Curso"
    folder: "content/courses"
    create: true
    # Depth 4 permite: Curso (1) -> Modulo (2) -> Leccion (3) -> (Extra)
    nested: 
      depth: 4 
      summary: "{{title}}"
      path: {label: "Ruta/Carpeta", index: true}
    
    # Decap usará estos campos. Como mezclamos carpetas (index.md) y archivos (lecciones),
    # hacemos muchos campos opcionales.
    fields:
      - {label: "Título", name: "title", widget: "string"}
      
      # Campos de Portada de Curso
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Instructor", name: "instructor", widget: "string", required: false}
      - {label: "Descripción", name: "description", widget: "text", required: false}
      - {label: "Estado", name: "status", widget: "select", options: ["available", "coming_soon", "in_progress"], required: false}
      
      # Campos de Lección
      - {label: "Video URL", name: "videoUrl", widget: "string", required: false}
      - {label: "Duración", name: "duration", widget: "string", required: false}
      
      - {label: "Cuerpo / Contenido", name: "body", widget: "markdown"}