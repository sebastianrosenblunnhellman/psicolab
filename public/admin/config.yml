# Decap CMS Configuration for PsiColab

# BACKEND: Netlify Git Gateway
backend:
  name: git-gateway
  branch: master # Rama master confirmada

# LOCAL BACKEND
local_backend: true 

# CARPETA DE IMÁGENES
media_folder: "public/images/cms"
public_folder: "/images/cms"

collections:
  # COLECCIÓN DE ARTÍCULOS
  - name: "articles"
    label: "Artículos"
    folder: "content/articles"
    create: true
    slug: "{{slug}}"
    sortable_fields: ['title', 'date']
    fields:
      - {label: "Título", name: "title", widget: "string"}
      - {label: "Tipo", name: "type", widget: "hidden", default: "articulo"}
      - {label: "Fecha", name: "date", widget: "datetime"}
      - {label: "Autor", name: "author", widget: "string", default: "Psi Colab"}
      - {label: "Etiquetas", name: "tags", widget: "list", default: ["Psicología"]}
      - {label: "Tiempo de Lectura", name: "readTime", widget: "string", default: "5 min"}
      - {label: "Extracto", name: "excerpt", widget: "text"}
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Publicado", name: "published", widget: "boolean", default: true}
      - {label: "Cuerpo", name: "body", widget: "markdown"}

  # COLECCIÓN DE RECURSOS
  - name: "resources"
    label: "Recursos"
    folder: "content/resources"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Título", name: "title", widget: "string"}
      - {label: "Tipo", name: "type", widget: "hidden", default: "biblioteca"}
      - {label: "Autor", name: "author", widget: "string", required: false}
      - {label: "Extracto", name: "excerpt", widget: "text"}
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Link Externo", name: "link", widget: "string", required: false}
      - {label: "Cuerpo", name: "body", widget: "markdown", required: false}

  # COLECCIÓN DE CURSOS (JERÁRQUICA)
  - name: "courses"
    label: "Cursos"
    label_singular: "Curso / Módulo / Lección"
    folder: "content/courses"
    create: true
    nested:
      depth: 4 # Course -> Module -> Lesson -> (Optional Sub-lesson)
      summary: "{{title}}"
    # `index: true` forces new entries to be created as folders with an index.md file.
    # This is required to support the Course -> Module -> Lesson structure where Modules are folders.
    meta: { path: { label: "Ruta (Carpeta)", index: true } }
    
    fields:
      - {label: "Título", name: "title", widget: "string"}
      
      # Course Meta (These should be filled for the Course Landing Page)
      - {label: "Descripción", name: "description", widget: "text", required: false, hint: "Solo para la portada del curso"}
      - {label: "Instructor", name: "instructor", widget: "string", required: false, hint: "Solo para la portada del curso"}
      - {label: "Nivel", name: "level", widget: "select", options: ["Principiante", "Intermedio", "Avanzado", "Todos los niveles"], required: false, hint: "Solo para la portada del curso"}
      - {label: "Estado", name: "status", widget: "select", options: ["available", "coming_soon", "in_progress"], required: false, default: "coming_soon", hint: "Solo para la portada del curso"}
      - {label: "Categoría", name: "category", widget: "string", required: false, hint: "Solo para la portada del curso"}
      - {label: "Estudiantes", name: "students", widget: "number", required: false, default: 0, hint: "Solo para la portada del curso"}
      - {label: "Calificación", name: "rating", widget: "number", value_type: "float", min: 0, max: 5, step: 0.1, required: false, default: 5, hint: "Solo para la portada del curso"}
      - {label: "Fecha", name: "date", widget: "datetime", required: false, hint: "Solo para la portada del curso"}
      
      # Shared / Lesson Fields
      - {label: "Duración", name: "duration", widget: "string", required: false, hint: "Ej: '10 min' para lección o '20 horas' para curso"}
      - {label: "Video URL", name: "videoUrl", widget: "string", required: false, hint: "Solo para lecciones"}
      
      - {label: "Imagen", name: "image", widget: "image", required: false}
      - {label: "Cuerpo", name: "body", widget: "markdown"}
